<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<?xml version='1.0' encoding='iso-8859-1' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="/Layout.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define name="content">
        <h:head><title>JUEGO</title>

            <link href="estilos/jsfcrud.css" type="text/css" rel="stylesheet" />
            <script type="text/javascript" src="estilos/validaciones.js"></script>
            <link href="estilos/estilo.css" type="text/css" rel="stylesheet" />
            <link href="estilos/estiloColorFondo.css" rel="stylesheet" type="text/css"/>
            <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />

        </h:head>
        <h:body>
            <p:growl id="msgs" showSummary="false" showDetail="true" life="4000"/>
            <p:toolbar  >
                <f:facet name="left">
                    <h:outputLabel value="JUEGOS DE GUERRA - JUEGO" ></h:outputLabel>
                </f:facet>
                <f:facet name="right">
                    <p:commandButton id="btn_salirALL1"   style="  height: 28px" icon="fa fa-sign-in" action="home.xhtml"  >

                        <p:confirm header="Confirmación" message="Está seguro de Salir?" />
                    </p:commandButton>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                        <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                           icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </f:facet>
            </p:toolbar>
            <h:form id="formh">
                <h:panelGrid columns="2" cellpadding="10">

                    <p:dataTable id="tprincipal" filteredValue="#{juego.filtered}"
                                 rowStyleClass="#{object.jueEstado == 1 ? 'cologreen' : ''}"
                                 var="object" value="#{juego.listaCeoJuego}" 
                                 emptyMessage="No se encontraron datos"
                                 rows="5" paginator="true" 
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} 
                                 {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"     
                                 rowsPerPageTemplate="5,10,15"
                                 scrollable="true" scrollHeight="200"

                                 >
                        <f:facet name="header">
                            <p:outputPanel>
                                <p:commandButton id="#{msg['id_boton_nuevo']}" type="button"   style="float:right"
                                                 onclick="PF('pNuevoJ').show()" icon="fa fa fa-plus"
                                                 update=":#{p:component('jC')}">

                                </p:commandButton>
                            </p:outputPanel>
                        </f:facet>
                        <p:column   filterBy="#{object.jueNombre}" headerText="NOMBRE"  width="160"
                                    filterMatchMode="contains">
                            <h:outputText value="#{object.jueNombre}" />
                        </p:column>
                        <p:column width="90" headerText="FECHA CREACIÓN" filterBy="#{object.jueFechaCreacion}"   filterMatchMode="contains">
                            <h:outputText value="#{object.jueFechaCreacion}" />
                        </p:column>
                        <p:column  width="90" sortBy="#{object.jueFecha}" filterBy="#{object.jueFecha}" headerText="FECHA JUEGO"  
                                   filterMatchMode="contains" >
                            <h:outputText value="#{object.jueFecha}" />
                        </p:column>
                        <p:column  headerText="EDITAR" width="65" style="text-align: center" >
                            <p:commandButton  icon="fa fa-edit"  update=":#{p:component('formEdicion')}"
                                              oncomplete="PF('formEdicionW').show()"
                                              disabled="#{object.jueEstado!=null ? object.jueEstado==2 ? 'true':'false':'eliminar'}">
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedEdit}" />
                            </p:commandButton>
                        </p:column>
                        <p:column   headerText="ESTADO" width="50" style="text-align: center">
                            <p:commandButton  
                                update=":formh,:msgs"  icon="#{object.jueEstado!=null ? object.jueEstado==2 ? 'fa fa-close':'fa fa-check':'eliminar'}"  >
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedEliminar}" />
                                <p:confirm message="#{msg['mensaje_advertencia_guardar']}" icon="ui-icon-alert" />
                            </p:commandButton>
                            <p:confirmDialog global="true" >
                                <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" 
                                                 />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no"  />
                            </p:confirmDialog>

                        </p:column>
                        <p:column  headerText="UNIDADES" width="65" style="text-align: center" >
                            <p:commandButton  icon="fa fa-list" update="myOutputPanel" onclick="PF('pUnidadMod').show()"
                                              disabled="#{object.jueEstado!=null ? object.jueEstado==2 ? 'true':'false':'eliminar'}">
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedArbolModificacion}" />
                            </p:commandButton>
                        </p:column>

                        <p:column   headerText="PRC"  width="25" style="text-align: center">
                            <p:commandButton  icon="fa fa-bar-chart-o" update="panelPrc"
                                              onclick="PF('dlg1').show();" >
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedPrc}" />
                            </p:commandButton>
                        </p:column>
                        <p:column   headerText="PERMISOS USUARIO" width="70"  style="text-align: center">
                            <p:commandButton icon="fa fa-group" onclick="PF('dlgpermisos').show();" update="panelPermiso"
                                             disabled="#{object.jueEstado!=null ? object.jueEstado==2 ? 'true':'false':'eliminar'}">
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedArbol}" />
                            </p:commandButton>
                        </p:column>
                        <p:column   headerText="XML" width="30"  style="text-align: center">
                            <p:commandButton  update=":msgs" icon="fa fa-file-text-o"                                                  disabled="#{object.jueEstado!=null ? object.jueEstado==2 ? 'true':'false':'eliminar'}">
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedArbolXml}" />
                            </p:commandButton>
                        </p:column>
                        <p:column   headerText="REPORTE RESULTADOS" width="70"  style="text-align: center">
                            <p:commandButton   icon="fa fa-print"  onclick="PF('ex').show()" update="panelReporte " > 
                                <f:setPropertyActionListener value="#{object}" target="#{juego.selectedArbolReporte}" />
                            </p:commandButton>
                        </p:column>
                    </p:dataTable>

                </h:panelGrid>

            </h:form>


            <!--*********** PANTALLA DE REPORTES ***********-->
            <!--*********************************************-->
            <p:dialog id="dialog1" header="REPORTES RESULTADOS" widgetVar="ex" height="700" 
                      width="1300" draggable="false" >
                <p:outputPanel id="panelReporte" >
                    <h:form enctype="multipart/form-data">
                        <p:growl id="messages" showDetail="true" />
                        <h:panelGrid columns="1" cellpadding="2" style="height: 1px">
                            <p:column colspan="2">
                                <p:separator/>
                                <p:fileUpload fileUploadListener="#{rptResultadosJuego.handleFileUpload}" mode="advanced" required="true"
                                              requiredMessage="!Es necesario subir un archivo!"
                                              fileLimitMessage="!Solo puede seleccionar un archivo!"
                                              invalidFileMessage="!Tipo de Archivo Invalido!"
                                              invalidSizeMessage="!El tamaño es superior al admitido! "
                                              sizeLimit="10000000" allowTypes="/(\.|\/)(txt)$/"  update="messages"
                                              dragDropSupport="true" label="Seleccionar Archivo" fileLimit="1"
                                              uploadLabel="GUARDAR" cancelLabel="CANCELAR"/>
                                <p:separator/>
                            </p:column>
                            <p:selectOneRadio id="equipoReport" value="#{rptResultadosJuego.idSeleccionFuerza}"  columns="2" >
                                <f:selectItem itemLabel="FUERZA AMIGA" itemValue="A" />
                                <f:selectItem itemLabel="FUERZA ENEMIGA" itemValue="R" />
                                <p:ajax listener="#{rptResultadosJuego.obtenerUnidades}" update="dw_JuegosCo"/>
                            </p:selectOneRadio>
                            <h:outputLabel  value="Tipo Reporte:" />
                            <p:selectOneRadio id="equipoReportT"  value="#{rptResultadosJuego.tipo}"    columns="2"  >
                                <f:selectItem itemLabel="ARMAMENTO" itemValue="ARMAMENTO" />
                                <f:selectItem itemLabel="PERSONAL" itemValue="PERSONAL" />

                            </p:selectOneRadio>
                            <h:panelGrid columns="2" cellpadding="1" style="height: 1px">
                                <h:outputLabel value="Comando Operacional:" />
                                <p:selectOneMenu  id="dw_JuegosCo" value="#{rptResultadosJuego.idSeleccionCO}" style="width:150px">
                                    <p:ajax update="dw_JuegosBri" />
                                    <f:selectItem  itemValue="" itemLabel="Seleccione: "/>
                                    <f:selectItems value="#{rptResultadosJuego.listaReportComandoOp}" />

                                </p:selectOneMenu>
                                <h:outputLabel  value="Brigadas:" />
                                <p:selectOneMenu  id="dw_JuegosBri" value="#{rptResultadosJuego.idSeleccionBRIG}" style="width:150px">
                                    <p:ajax update="dw_Batallon"/>
                                    <f:selectItem  itemValue="" itemLabel="Seleccione:" />
                                    <f:selectItems value="#{rptResultadosJuego.listReportBrigada}" />
                                </p:selectOneMenu> 
                                <h:outputLabel  value="Batallones:" />
                                <p:selectOneMenu  id="dw_Batallon" value="#{rptResultadosJuego.idSeleccionBatallon}" style="width:150px">
                                    <p:ajax update="dw_Compania"/>
                                    <f:selectItem  itemValue="" itemLabel="Seleccione:" />
                                    <f:selectItems value="#{rptResultadosJuego.listReportBatallones}" />
                                </p:selectOneMenu>
                                <h:outputLabel  value="Companias:" />
                                <p:selectOneMenu  id="dw_Compania" value="#{rptResultadosJuego.idSeleccionCompanias}" style="width:150px">
                                    <p:ajax update="dw_Peloton"/>
                                    <f:selectItem  itemValue="" itemLabel="Seleccione:"/>
                                    <f:selectItems value="#{rptResultadosJuego.listReportCompanias}" />
                                </p:selectOneMenu>
                                <h:outputLabel value="Pelotones:" />
                                <p:selectOneMenu  id="dw_Peloton" value="#{rptResultadosJuego.idSelectionP}" style="width:150px">
                                    <f:selectItem  itemValue="" itemLabel="Seleccione:"/>
                                    <f:selectItems value="#{rptResultadosJuego.listReportPelotones}" />
                                </p:selectOneMenu>
                            </h:panelGrid>
                        </h:panelGrid>
                        <h:panelGrid columns="2" cellpadding="4">
                            <h:commandButton id="btn_Imprimir" value="Generar Reporte"  action="#{rptResultadosJuego.imprimir}" >
                            </h:commandButton>
                        </h:panelGrid>
                    </h:form>
                </p:outputPanel>
            </p:dialog>

            <!--*********** PANTALLA DE ACTUALIZAR JUEGO ***********-->
            <!--*********************************************-->
            <h:form id="formEditJuego"> 
                <p:dialog header="EDITAR JUEGO DE GUERRA" widgetVar="formEdicionW" id="formEdicion" 
                          closable="false" draggable="false" width="800">
                    <h:panelGrid columns="1" cellpadding="1">
                        <h:outputLabel value="Nombre *:" />
                        <p:inputText id="nombre" style="text-transform: uppercase; font-weight:bold; color: black " 
                                     value="#{juego.selectedEdit.jueNombre}" 
                                     size="#{PForm.anchoCajaTextoNombre}" maxlength="#{PForm.longitudMaximaCaracteresNombres}"
                                     />
                        <p:outputLabel value="Fecha de Juego *:" />
                        <p:calendar id="fecha" value="#{juego.selectedEdit.jueFecha}" 
                                    style="text-transform: uppercase; font-weight:bold; color: black" />

                        <p:outputLabel value="Observaciones:" />
                        <p:inputTextarea rows="5" cols="30" counter="display" value="#{juego.selectedEdit.jueObservacion}"
                                         maxlength="#{PForm.longitudMaximaCaracteresNombres}"
                                         counterTemplate="{0} Caracteres disponibles." autoResize="false" />
                        <h:outputText id="display" />
                        <br> </br> 
                        <h:panelGrid columns="2" cellpadding="1">
                            <p:commandButton    update="msgs" icon="fa fa-save"
                                                action="#{juego.editarCabeceraJuego}"   >
                                <p:confirm header="Confirmación" message="#{msg['mensaje_advertencia_guardar']}" />
                            </p:commandButton>
                            <p:commandButton style="  height: 29px" icon="fa fa-sign-in" onclick="PF('formEdicionW').hide()"
                                             action="#{juego.cancelarCabeceraJuego}" update="formh"/>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                                <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                                   icon="ui-icon-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                        </h:panelGrid>
                    </h:panelGrid>
                </p:dialog>
            </h:form>

            <h:form id="jC">      
                <p:dialog header="NUEVO JUEGO" widgetVar="pNuevoJ" id="dlgNuevoJ" 
                          closable="false" >
                    <h:panelGrid columns="1" cellpadding="1">
                        <h:outputLabel value="Nombre *:" />
                        <p:inputText id="nombre" style="text-transform: uppercase; font-weight:bold; color: black " 
                                     value="#{juego.ceoJuego.jueNombre}" 
                                     size="#{PForm.anchoCajaTextoNombre}" maxlength="#{PForm.longitudMaximaCaracteresNombres}"
                                     />

                        <p:outputLabel value="Fecha de Juego *:" />
                        <p:calendar id="fecha" value="#{juego.ceoJuego.jueFecha}" mindate="#{juego.fechaMinima}" mask="dd/MM/yy"
                                    style="text-transform: uppercase; font-weight:bold; color: black" />
                        <p:outputLabel value="Observaciones:" />
                        <p:inputTextarea rows="5" cols="30" counter="display" value="#{juego.ceoJuego.jueObservacion}"
                                         maxlength="#{PForm.longitudMaximaCaracteresNombres}"
                                         counterTemplate="{0} Caracteres disponibles." autoResize="false" />
                        <h:outputText id="display" />
                        <br> </br> 
                        <h:panelGrid columns="2" cellpadding="1">
                            <p:commandButton    update="msgs,:formh:,:jC" icon="fa fa-save"
                                                action="#{juego.guardarCabeceraJuego}"   >
                                <p:confirm header="Confirmación" message="#{msg['mensaje_advertencia_guardar']}" />
                            </p:commandButton>
                            <p:commandButton style="  height: 28px" icon="fa fa-sign-in" onclick="PF('pNuevoJ').hide()"
                                             action="#{juego.cancelarCabeceraJuego}"/>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                                <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                                   icon="ui-icon-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                        </h:panelGrid>
                    </h:panelGrid>
                </p:dialog>
            </h:form>
            <h:form id="arbol">
                <p:dialog header="Unidades" widgetVar="pUnidad" id="dlgUnidad" height="650" width="1300" position="up">
                    <h:panelGrid  id="pan"  columns="4" cellpadding="10" >
                        <h:outputLabel value="Equipo Azul" id="etiquetaEquipo" />
                        <p:scrollPanel style="height:500px;width:600px;">
                            <p:tree id="arbolt" value="#{juego.raiz}" var="object" dynamic="true" 
                                    propagateSelectionUp="false" 
                                    selectionMode="checkbox" selection="#{juego.checkboxSelectedTreeNodes}"
                                    style="width: 400%;height: 500px;overflow: auto;"   >
                                <p:treeNode>
                                    <h:outputText value="#{object.concatenaNombreSigla}" 
                                                  style="#{object.uorNivel == 1 ? object.uorId == 1 ?  'color:blue;':'color:red;': null}"/>
                                </p:treeNode>
                                <p:ajax event="select"  listener="#{juego.onNodeSelect}" 
                                        ></p:ajax>
                                <p:ajax event="unselect" listener="#{juego.onNodeUnSelect}"></p:ajax>

                            </p:tree>

                            <p:contextMenu for="arbolt" >
                                <p:menuitem value="Duplicar" actionListener="#{juego.duplicar()}" 
                                            update="arbolt,msgs"  disabled="#{juego.objetoOculto.uorId == 1 ? true : false}" />
                                <p:menuitem value="Editar" 
                                            onclick="PF('editFolderDialog').show()"   />  
                            </p:contextMenu>
                        </p:scrollPanel>




                        <h:outputLabel value="Equipo Rojo" id="etiquetaEquipoRojo" />
                        <p:scrollPanel style="height:500px;width:600px;">
                            <p:tree id="arbolRojo" value="#{juego.raizEqRojo}" var="objectRojo" dynamic="true" 
                                    propagateSelectionUp="false" 
                                    selectionMode="checkbox" selection="#{juego.checkboxSelectedTreeNodesR}"
                                    style="width: 400%;height: 500px;overflow: auto;"   >
                                <p:treeNode>
                                    <h:outputText value="#{objectRojo.concatenaNombreSigla}" 
                                                  style="#{objectRojo.uorNivel == 1 ? objectRojo.uorId == 1 ?  'color:blue;':'color:red;': null}"/>
                                </p:treeNode>
                                <p:ajax event="select"  listener="#{juego.onNodeSelect}"></p:ajax>
                                <p:ajax event="unselect" listener="#{juego.onNodeUnSelect}"></p:ajax>

                            </p:tree>
                            <p:contextMenu for="arbolRojo" >
                                <p:menuitem value="Duplicar"  actionListener="#{juego.duplicar()}" 
                                            update="arbolRojo,msgs"   />
                                <p:menuitem value="Editar" 
                                            onclick="PF('editFolderDialog').show()"   />  
                            </p:contextMenu>
                        </p:scrollPanel>
                        <p:commandButton value="GUARDAR"  update="arbol,msgs" 
                                         actionListener="#{juego.displaySelectedMultiple(juego.checkboxSelectedTreeNodes,juego.checkboxSelectedTreeNodesR)}">
                            <p:confirm header="Confirmación" message="#{msg['mensaje_advertencia_guardar']}" />
                        </p:commandButton>
                        <p:commandButton value="CANCELAR"   onclick="PF('pUnidad').hide()" update="dlgUnidad"
                                         action="#{juego.cancelar}"/>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                            <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                               icon="ui-icon-check" />
                            <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                        </p:confirmDialog>
                    </h:panelGrid>
                </p:dialog>

                <!--*********** BEGIN EDIT Dialog Box ***********-->
                <p:dialog id="editFolderDialog" 
                          header="Editar Nombre" widgetVar="editFolderDialog"  resizable="false" 
                          >  
                    <p:outputPanel id="editFolderPanel">  
                        <p:message id="msgEditFolder" for="txEditFolder"/>  
                        <h:panelGrid columns="2" cellpadding="4">
                            <h:outputText value="Nombre: *" />  
                            <p:inputText id="txEditFolder" value="#{juego.nombreUnidad}" /> 
                            <h:outputText value="Sigla: *" />  
                            <p:inputText id="txtSigla" value="#{juego.nombreSigla}" />
                            <p:commandButton  value="GUARDAR"  update="arbolt,arbolRojo,msgs"  action="#{juego.renombrarItem}"
                                              onclick="PF('editFolderDialog').hide()"    />
                            <p:commandButton  value="SALIR"   
                                              onclick="PF('editFolderDialog').hide()"/>
                        </h:panelGrid>  
                    </p:outputPanel>
                </p:dialog>  
                <!--*********** END EDIT Dialog Box ***********-->  
            </h:form>

            <p:dialog header="UNIDADES JUEGO DE GUERRA" widgetVar="pUnidadMod"  closable="false" draggable="false"
                      id="dlgUnidadMod" height="600" width="1400" position="up">
                <p:outputPanel id="myOutputPanel">
                    <h:form id="arbolModificar">
                        <h:panelGrid  id="panM3"  columns="3" cellpadding="1" style="height: 10px">
                            <p:commandButton    update="msgs,formh" icon="fa fa-save" 
                                                action="#{modificacionJuego.guardarUnidadesJuego}">
                                <p:confirm header="Confirmación" message="#{msg['mensaje_advertencia_guardar']}" />
                            </p:commandButton>
                            <h:commandButton image="imagenes/imp.png" style="background-color: #124c03; height: 32px; color: white; font-weight: bold "
                                             actionListener="#{modificacionJuego.imprimirReporte()}">
                            </h:commandButton>
                            <p:commandButton  style="  height: 28px" icon="fa fa-sign-in" onclick="PF('pUnidadMod').hide()"
                                              update="panM"    action="#{modificacionJuego.cancelar}"/> 
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                                <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                                   icon="ui-icon-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                        </h:panelGrid>
                        <p:selectOneRadio id="equipo" value="#{modificacionJuego.idSelected}" columns="2">
                            <f:selectItem itemLabel="EDITAR Y DUPLICAR" itemValue="1" />
                            <f:selectItem itemLabel="SELECCIONAR" itemValue="2" />
                            <p:ajax listener="#{modificacionJuego.cambiarPropiedades}" update="arboltM,arboltMR,contextA,contextR"/>
                        </p:selectOneRadio>
                        <h:panelGrid  id="panM"  columns="2" cellpadding="10" >
                            <h:panelGrid  id="panM1"  columns="1" >
                                <h:panelGrid  columns="2" >
                                    <canvas id="rectangulo" width="35" height="11" 
                                            style=" background-color: #2E2EFE"
                                            ></canvas>  
                                    <h:outputLabel value="#{modificacionJuego.fuerzaAmiga}" id="etiquetaEquipoM" />
                                </h:panelGrid>
                                <p:scrollPanel style="height:450px;width:600px" mode="native">
                                    <p:tree id="arboltM" value="#{modificacionJuego.raiz}" var="objectM" dynamic="true" 
                                            propagateSelectionUp="true" 
                                            selectionMode="#{modificacionJuego.editar==true ?  'single' : 'checkbox'}"
                                            selection="#{modificacionJuego.editar==true ?  modificacionJuego.singleSelectedTreeNode: modificacionJuego.checkboxSelectedTreeNodes}"
                                            style="width: 380%"   >
                                        <p:treeNode>
                                            <h:outputText value="#{objectM.concatenaNombreSigla}"/>
                                        </p:treeNode>
                                        <p:ajax event="select" listener="#{modificacionJuego.onNodeSelect}"></p:ajax>
                                        <p:ajax event="unselect" listener="#{modificacionJuego.onNodeUnSelect}"></p:ajax>

                                    </p:tree>
                                    <p:contextMenu for="arboltM" id="contextA">
                                        <p:menuitem value="Duplicar" id="duplicar" icon="fa fa-copy" disabled="#{modificacionJuego.editar==true ?  'false' : 'true'}"
                                                    actionListener="#{modificacionJuego.duplicar()}" 
                                                    update="arboltM,msgs"     />
                                        <p:menuitem value="Editar" icon="fa fa-edit" id="editar" disabled="#{modificacionJuego.editar==true ?  'false' : 'true'}"
                                                    oncomplete="PF('editFolderDialogM').show()"
                                                    update="editFolderDialogMR" actionListener="#{modificacionJuego.seleccionarUnidadEditar}" />  
                                    </p:contextMenu>
                                </p:scrollPanel>
                            </h:panelGrid>
                            <h:panelGrid  id="panM2"  columns="1" >
                                <h:panelGrid  columns="2" >
                                    <canvas id="rectangulo" width="35" height="11" 
                                            style=" background-color: #FF0000"
                                            ></canvas>  
                                    <h:outputLabel value="#{modificacionJuego.fuerzaEnemiga}" id="etiquetaEquipoMR" />
                                </h:panelGrid>
                                <p:scrollPanel style="height:450px;width:600px" mode="native">
                                    <p:tree id="arboltMR" value="#{modificacionJuego.raizEqRojo}" var="objectMR" dynamic="true" 
                                            propagateSelectionUp="true" 
                                            selectionMode="#{modificacionJuego.editar==true ?  'single' : 'checkbox'}"
                                            selection="#{modificacionJuego.editar==true ?  modificacionJuego.singleSelectedTreeNodeR: modificacionJuego.checkboxSelectedTreeNodesR}"
                                            style="width: 700px"   >
                                        <p:treeNode>
                                            <h:outputText value="#{objectMR.concatenaNombreSigla}"/>
                                        </p:treeNode>
                                        <p:ajax event="select" listener="#{modificacionJuego.onNodeSelect}"></p:ajax>
                                        <p:ajax event="unselect" listener="#{modificacionJuego.onNodeUnSelect}"></p:ajax>

                                    </p:tree>
                                    <p:contextMenu for="arboltMR" id="contextR">
                                        <p:menuitem value="Duplicar" icon="fa fa-copy" disabled="#{modificacionJuego.editar==true ?  'false' : 'true'}"
                                                    actionListener="#{modificacionJuego.duplicarR()}" 
                                                    update="arboltMR,msgs"     />
                                        <p:menuitem value="Editar" icon="fa fa-edit" disabled="#{modificacionJuego.editar==true ?  'false' : 'true'}"
                                                    oncomplete="PF('editFolderDialogM').show()"
                                                    update="editFolderDialogMR" actionListener="#{modificacionJuego.seleccionarUnidadEditarR}" />  
                                    </p:contextMenu>

                                    <!--*********** EDITAR UNIDAD DE JUEGO ***********-->
                                    <p:dialog id="editFolderDialogMR" header="EDITAR UNIDAD" width="700" closable="false"  draggable="false"
                                              widgetVar="editFolderDialogM"  resizable="false">  
                                        <h:panelGrid columns="2" cellpadding="4">
                                            <h:outputText value="Nombre: *" />  
                                            <p:inputText id="txEditFolderM" value="#{modificacionJuego.seleccionado.juorNombre}" size="70"/> 
                                            <h:outputLabel  value="Sigla *:" />
                                            <p:inputText id="siglaA" style="text-transform: uppercase; font-weight:bold; color: black " value="#{modificacionJuego.seleccionado.juorSigla}" 
                                                         size="15" maxlength="10"/> 

                                            <f:facet name="footer">
                                                <p:commandButton  value="GUARDAR" icon="fa fa-save" update="arboltM,arboltMR,msgs"  action="#{modificacionJuego.renombrarItem}">
                                                    <p:confirm header="Confirmación" message="#{msg['mensaje_advertencia_guardar']}"  />          
                                                </p:commandButton>
                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade" severity="alert">
                                                    <p:commandButton   value="Si" type="button" styleClass="ui-confirmdialog-yes" 
                                                                       icon="ui-icon-check" />
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                                                </p:confirmDialog>
                                                <p:commandButton  value="SALIR" icon="fa fa-close"  onclick="PF('editFolderDialogM').hide()" />
                                            </f:facet>
                                        </h:panelGrid>  
                                    </p:dialog>  
                                </p:scrollPanel>
                            </h:panelGrid>
                        </h:panelGrid>
                    </h:form>
                </p:outputPanel>
            </p:dialog>




            <!--************************************ formulario visualizador prc ***************************-->
            <!--********************************************************************************************-->
            <!--********************************************************************************************-->

            <p:dialog header="VISUALIZADOR PRC" widgetVar="dlg1" height="750" width="1400"
                      draggable="false" 
                      position="up"
                      closable="false">
                <p:outputPanel id="panelPrc">
                    <h:form id="SSS">
                        <h:panelGrid columns="4" cellspacing="1" > 
                            <p:commandButton    oncomplete="PF('visu').show()" update="graf,arbolazulprc" icon="fa fa-bar-chart"
                                             action="#{visualizadorPrc.displaySelectedMultiple(visualizadorPrc.checkboxSelectedTreeNodes,visualizadorPrc.checkboxSelectedTreeNodesR)}">
                            </p:commandButton>
                            <h:commandButton  image="imagenes/imp.png" style="background-color: #124c03; height: 32px; color: white; font-weight: bold "
                                             action="#{visualizadorPrc.imprimirReportPrc(visualizadorPrc.checkboxSelectedTreeNodes,visualizadorPrc.checkboxSelectedTreeNodesR)}">
                            </h:commandButton>

                            <p:commandButton   style="  height: 28px" icon="fa fa-sign-in"  onclick="PF('dlg1').hide()" update="arbolazulprc,arbolrojoprc"
                                             action="#{visualizadorPrc.cancelar()}">
                            </p:commandButton>
                        </h:panelGrid>
                        <h:panelGrid columns="4" style="height: 50px;" >  
                            <h:panelGrid columns="1" style="width: 1px" > 
                                <canvas id="rectangulo" width="35" height="11" 
                                        style=" background-color: #2E2EFE"
                                        ></canvas>
                                <h:outputLabel value="#{visualizadorPrc.fuerzaAmiga}"  />
                            </h:panelGrid>
                            <p:scrollPanel style="height:500px;width:600px" mode="native">
                                <p:tree id="arbolazulprc" value="#{visualizadorPrc.raiz}" var="objectazulprc" dynamic="true" 
                                        propagateSelectionUp="true" 
                                        selectionMode="checkbox" selection="#{visualizadorPrc.checkboxSelectedTreeNodes}"
                                        style="width: 400%"   >
                                    <p:treeNode>
                                        <h:outputText value="#{objectazulprc.concatenaNombreSigla}" 
                                                      />
                                    </p:treeNode>
                                    <p:ajax event="select" listener="#{visualizadorPrc.onNodeSelect}"></p:ajax>
                                    <p:ajax event="unselect" listener="#{visualizadorPrc.onNodeUnSelect}"></p:ajax>
                                </p:tree>
                            </p:scrollPanel>
                            <h:panelGrid columns="1" style="width: 1px" > 
                                <canvas id="rectangulor" width="35" height="11" 
                                        style=" background-color: #FF0000"
                                        ></canvas>
                                <h:outputLabel value="#{visualizadorPrc.fuerzaEnemiga}" />
                            </h:panelGrid>
                            <p:scrollPanel style="height:500px;width:600px" mode="native">
                                <p:tree id="arbolrojoprc" value="#{visualizadorPrc.raizEqRojo}" var="objectrojoprc"
                                        dynamic="true" 
                                        propagateSelectionUp="true" 
                                        selectionMode="checkbox" selection="#{visualizadorPrc.checkboxSelectedTreeNodesR}"
                                        style="width: 400%"   >
                                    <p:treeNode>
                                        <h:outputText value="#{objectrojoprc.concatenaNombreSigla}" 
                                                      />
                                    </p:treeNode>
                                    <p:ajax event="select" listener="#{visualizadorPrc.onNodeSelect}"></p:ajax>
                                    <p:ajax event="unselect" listener="#{visualizadorPrc.onNodeUnSelect}"></p:ajax>
                                </p:tree>
                            </p:scrollPanel>
                        </h:panelGrid>


                    </h:form>
                </p:outputPanel>
            </p:dialog>
            <p:dialog header="VISUALIZADOR PRC" id="vgraf" widgetVar="visu" modal="true" appendTo="
                      @(body)" draggable="false"
                      height="400" width="800" position="center">
                <div align="center">
                    <p:outputPanel id="panelPrcGraf">
                        <p:chart type="bar" id="graf" model="#{visualizadorPrc.animatedModel2}" style="width:400px;" />
                    </p:outputPanel>    
                </div> 

            </p:dialog>
            <!--************************************ formulario permisos usuario ***************************-->
            <!--********************************************************************************************-->
            <!--********************************************************************************************-->

            <p:dialog header="PERMISOS USUARIO" draggable="false"
                      widgetVar="dlgpermisos" height="750" width="1400" position="up"
                      closable="false">


                <p:outputPanel id="panelPermiso" >

                    <h:form id="formpermisos" style="align-content: center">

                        <div align="left">
                            <h:outputLabel value="Usuario: *" />
                            <p:selectOneMenu id="cmbusuario" 
                                             value="#{permisosUsuarioJuego.cmbIdUsuario}" style="width:150px">
                                <f:selectItem itemLabel="Seleccione Usuario" itemValue="" noSelectionOption="true" />
                                <f:selectItems value="#{permisosUsuarioJuego.cmbListaUsuario}" />
                            </p:selectOneMenu>   
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;

                            <p:commandButton  icon="fa fa-plus"
                                              update="paneltablapermisos,arbolazulpermisos,arbolrojopermisos,@([id$=cmbusuario]),msgs" 
                                              action="#{permisosUsuarioJuego.displaySelectedMultiple(permisosUsuarioJuego.checkboxSelectedTreeNodes,permisosUsuarioJuego.checkboxSelectedTreeNodesR)}">

                            </p:commandButton>
                            <p:commandButton  update="msgs" icon="fa fa-save"
                                              action="#{permisosUsuarioJuego.guardarPermisos}">
                            </p:commandButton>
                            <h:commandButton  style="background-color: #124c03; height: 32px; color: white; font-weight: bold "
                                              actionListener="#{permisosUsuarioJuego.imprimirReporte()}">
                            </h:commandButton>
                            <p:commandButton  icon="fa fa-close" onclick="PF('dlgpermisos').hide()" update="tablapermisos,arbolazulpermisos,arbolrojopermisos"
                                              action="#{permisosUsuarioJuego.cancelar()}">
                            </p:commandButton>

                        </div>

                        <h:panelGrid columns="4" id="panelpermisos" style="height: 50px;" > 
                            <h:panelGrid columns="1" style="width: 1px" > 
                                <canvas id="rectangulo" width="35" height="11" 
                                        style=" background-color: #2E2EFE"
                                        ></canvas>
                                <h:outputLabel value="#{permisosUsuarioJuego.fuerzaAmiga}"  />
                            </h:panelGrid>
                            <p:scrollPanel style="height:300px;width:600px;" mode="native">
                                <p:tree id="arbolazulpermisos" value="#{permisosUsuarioJuego.raiz}" var="objectazulpermisos" dynamic="true" 
                                        propagateSelectionUp="false" 
                                        selectionMode="checkbox" selection="#{permisosUsuarioJuego.checkboxSelectedTreeNodes}"
                                        style="width: 400%;"   >
                                    <p:treeNode>
                                        <h:outputText value="#{objectazulpermisos.concatenaNombreSigla}" 
                                                      style="#{objectazulpermisos.juorPermisoAsignado==1 ? 'color: #327E04' : ''}"    />
                                    </p:treeNode>
                                    <p:ajax event="select"  listener="#{permisosUsuarioJuego.onNodeSelect}" 
                                            ></p:ajax>
                                    <p:ajax event="unselect" listener="#{permisosUsuarioJuego.onNodeUnSelect}"></p:ajax>
                                </p:tree>
                            </p:scrollPanel>
                            <h:panelGrid columns="1" style="width: 1px" > 
                                <canvas id="rectangulor" width="35" height="11" 
                                        style=" background-color: #FF0000"
                                        ></canvas>
                                <h:outputLabel value="#{permisosUsuarioJuego.fuerzaEnemiga}" />
                            </h:panelGrid>
                            <p:scrollPanel style="height:300px;width:600px;" mode="native">
                                <p:tree id="arbolrojopermisos" value="#{permisosUsuarioJuego.raizEqRojo}" var="objectrojopermisos"
                                        dynamic="true" 
                                        propagateSelectionUp="false" 
                                        selectionMode="checkbox" selection="#{permisosUsuarioJuego.checkboxSelectedTreeNodesR}"
                                        style="width: 400%;"   >
                                    <p:treeNode>
                                        <h:outputText value="#{objectrojopermisos.concatenaNombreSigla}" 
                                                      style="#{objectrojopermisos.juorPermisoAsignado==1 ? 'color: #327E04' : ''}"        />
                                    </p:treeNode>
                                    <p:ajax event="select"  listener="#{permisosUsuarioJuego.onNodeSelect}" 
                                            ></p:ajax>
                                    <p:ajax event="unselect" listener="#{permisosUsuarioJuego.onNodeUnSelect}"></p:ajax>
                                </p:tree>
                            </p:scrollPanel>
                        </h:panelGrid>

                        <div align="center">
                            <h:panelGrid columns="1" id="paneltablapermisos"  >  
                                <p:dataTable id="tablapermisos" 
                                             filteredValue="#{permisosUsuarioJuego.filtered}"
                                             var="objectabla" value="#{permisosUsuarioJuego.listaCeoUnidadUsuarioAgregado}" 
                                             emptyMessage="No se encontraron datos"
                                             rows="3" paginator="true" 
                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} 
                                             {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"     
                                             rowsPerPageTemplate="5,10,15"
                                             scrollable="true" scrollHeight="200"
                                             style="width: 600px;">
                                    <p:column   filterBy="#{objectabla.parUsuario.usuNombre}" headerText="USUARIO" 
                                                style="width: 1px"
                                                filterMatchMode="contains">
                                        <h:outputText value="#{objectabla.parUsuario.usuNombre}" />
                                    </p:column>
                                    <p:column   filterBy="#{objectabla.parUsuario.parRolusuario.rolNombre}" headerText="EQUIPO" 
                                                style="width: 1px"
                                                filterMatchMode="contains">
                                        <h:outputText value="#{objectabla.parUsuario.parRolusuario.rolNombre}" />
                                    </p:column>
                                    <p:column   headerText="ELIMINAR"  style="width: 1px">
                                        <p:commandButton  icon="fa fa-trash-o" update="tablapermisos,@([id$=cmbusuario])" > 
                                            <f:setPropertyActionListener value="#{objectabla}" target="#{permisosUsuarioJuego.selectedEliminar}" />
                                        </p:commandButton>
                                    </p:column>
                                    <p:columnGroup type="footer">
                                        <p:row>
                                            <p:column footerText="Total equipo amigo: #{permisosUsuarioJuego.totalEquipoUsuarioAzul}" />
                                            <p:column footerText="Total equipo enemigo: #{permisosUsuarioJuego.totalEquipoUsuarioRojo}" />
                                        </p:row>
                                    </p:columnGroup>
                                </p:dataTable>
                            </h:panelGrid>
                        </div>
                    </h:form>
                </p:outputPanel>
            </p:dialog>
        </h:body>
    </ui:define>
</ui:composition>